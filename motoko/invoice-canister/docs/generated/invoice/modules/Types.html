<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="../../styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="../../invoice/Invoice.html">invoice/Invoice</a></li></li><li><li><a href="../../invoice/modules/Migration.html">invoice/modules/Migration</a></li></li><li><li><a href="../../invoice/modules/Types.html">invoice/modules/Types</a></li></li><li><li><a href="../../invoice/modules/supported-token/SupportedToken.html">invoice/modules/supported-token/SupportedToken</a></li></li><li><li><a href="../../invoice/modules/supported-token/token-specific/icp/ActorSupertype.html">invoice/modules/supported-token/token-specific/icp/ActorSupertype</a></li></li><li><li><a href="../../invoice/modules/supported-token/token-specific/icp/Adapter.html">invoice/modules/supported-token/token-specific/icp/Adapter</a></li></li><li><li><a href="../../invoice/modules/supported-token/token-specific/icp/Types.html">invoice/modules/supported-token/token-specific/icp/Types</a></li></li><li><li><a href="../../invoice/modules/supported-token/token-specific/icrc1/AccountTextConverter.html">invoice/modules/supported-token/token-specific/icrc1/AccountTextConverter</a></li></li><li><li><a href="../../invoice/modules/supported-token/token-specific/icrc1/ActorSupertype.html">invoice/modules/supported-token/token-specific/icrc1/ActorSupertype</a></li></li><li><li><a href="../../invoice/modules/supported-token/token-specific/icrc1/Adapter.html">invoice/modules/supported-token/token-specific/icrc1/Adapter</a></li></li><li><li><a href="../../invoice/modules/supported-token/token-specific/icrc1/Types.html">invoice/modules/supported-token/token-specific/icrc1/Types</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.Details">Details</a></li></li><li><li><a href="#type.Permissions">Permissions</a></li></li><li><li><a href="#type.InvoiceId">InvoiceId</a></li></li><li><li><a href="#type.Invoice_">Invoice_</a></li></li><li><li><a href="#type.Invoice">Invoice</a></li></li><li><li><a href="#type.AddAllowedCreatorArgs">AddAllowedCreatorArgs</a></li></li><li><li><a href="#type.AddAllowedCreatorResult">AddAllowedCreatorResult</a></li></li><li><li><a href="#type.AddAllowedCreatorSuccess">AddAllowedCreatorSuccess</a></li></li><li><li><a href="#type.AddAllowedCreatorErr">AddAllowedCreatorErr</a></li></li><li><li><a href="#type.RemoveAllowedCreatorArgs">RemoveAllowedCreatorArgs</a></li></li><li><li><a href="#type.RemoveAllowedCreatorResult">RemoveAllowedCreatorResult</a></li></li><li><li><a href="#type.RemoveAllowedCreatorSuccess">RemoveAllowedCreatorSuccess</a></li></li><li><li><a href="#type.RemoveAllowedCreatorErr">RemoveAllowedCreatorErr</a></li></li><li><li><a href="#type.GetAllowedCreatorsListResult">GetAllowedCreatorsListResult</a></li></li><li><li><a href="#type.GetAllowedCreatorsListSuccess">GetAllowedCreatorsListSuccess</a></li></li><li><li><a href="#type.GetAllowedCreatorsListErr">GetAllowedCreatorsListErr</a></li></li><li><li><a href="#type.CreateInvoiceArgs">CreateInvoiceArgs</a></li></li><li><li><a href="#type.CreateInvoiceResult">CreateInvoiceResult</a></li></li><li><li><a href="#type.CreateInvoiceSuccess">CreateInvoiceSuccess</a></li></li><li><li><a href="#type.CreateInvoiceErr">CreateInvoiceErr</a></li></li><li><li><a href="#type.GetInvoiceArgs">GetInvoiceArgs</a></li></li><li><li><a href="#type.GetInvoiceResult">GetInvoiceResult</a></li></li><li><li><a href="#type.GetInvoiceSuccess">GetInvoiceSuccess</a></li></li><li><li><a href="#type.GetInvoiceErr">GetInvoiceErr</a></li></li><li><li><a href="#type.GetCallerBalanceArgs">GetCallerBalanceArgs</a></li></li><li><li><a href="#type.GetCallerBalanceResult">GetCallerBalanceResult</a></li></li><li><li><a href="#type.GetCallerBalanceSuccess">GetCallerBalanceSuccess</a></li></li><li><li><a href="#type.GetCallerBalanceErr">GetCallerBalanceErr</a></li></li><li><li><a href="#type.GetCallerAddressArgs">GetCallerAddressArgs</a></li></li><li><li><a href="#type.GetCallerAddressResult">GetCallerAddressResult</a></li></li><li><li><a href="#type.GetCallerAddressSuccess">GetCallerAddressSuccess</a></li></li><li><li><a href="#type.GetCallerAddressErr">GetCallerAddressErr</a></li></li><li><li><a href="#type.VerifyInvoiceArgs">VerifyInvoiceArgs</a></li></li><li><li><a href="#type.VerifyInvoiceResult">VerifyInvoiceResult</a></li></li><li><li><a href="#type.VerifyInvoiceSuccess">VerifyInvoiceSuccess</a></li></li><li><li><a href="#type.VerifyInvoiceErr">VerifyInvoiceErr</a></li></li><li><li><a href="#type.TransferArgs">TransferArgs</a></li></li><li><li><a href="#type.TransferResult">TransferResult</a></li></li><li><li><a href="#type.TransferError">TransferError</a></li></li><li><li><a href="#type.RecoverInvoiceSubaccountBalanceArgs">RecoverInvoiceSubaccountBalanceArgs</a></li></li><li><li><a href="#type.RecoverInvoiceSubaccountBalanceResult">RecoverInvoiceSubaccountBalanceResult</a></li></li><li><li><a href="#type.RecoverInvoiceSubacccountBalanceSuccess">RecoverInvoiceSubacccountBalanceSuccess</a></li></li><li><li><a href="#type.RecoverInvoiceSubacccountBalanceErr">RecoverInvoiceSubacccountBalanceErr</a></li></li><li><li><a href="#type.ToOtherAddressFormatArgs">ToOtherAddressFormatArgs</a></li></li><li><li><a href="#type.ToOtherAddressFormatResult">ToOtherAddressFormatResult</a></li></li><li><li><a href="#type.ToOtherAddressFormatSuccess">ToOtherAddressFormatSuccess</a></li></li><li><li><a href="#type.ToOtherAddressFormatErr">ToOtherAddressFormatErr</a></li></li><li><li><a href="#type.InvoiceCanisterAPI">InvoiceCanisterAPI</a></li></li></ul></nav><div class="documentation"><h1>invoice/modules/Types</h1><div class="declaration"><h4 class="type-declaration" id="type.Details"><span class="keyword">type </span><span class="type">Details</span> = { description : <span class="type">Text</span>; meta : <span class="type">Blob</span> }</h4><p><p><strong>Detail types of an invoice.</strong><br/>    Includes fields <code>description : Text</code> and <code>meta : Blob</code>.<br/>    The meta blob could be a JSON object encoded as UTF-8, providing</p>
<pre><code>the particular details related to this invoice such as buyer's 
contact information, delivery instructions, or the line items 
this invoice is responsible for rendering as a service or 
payment. Note that by default neither the description nor the
meta blob is encrypted, so be aware unless it is encrypted before
being included as an argument of `create_invoice()` these details 
could be physically inspected by a node provider. If privacy is 
needed, encrypt this data before it reaches the invoice canister.</code></pre></p></div><div class="declaration"><h4 class="type-declaration" id="type.Permissions"><span class="keyword">type </span><span class="type">Permissions</span> = { canGet : [<span class="type">Principal</span>]; canVerify : [<span class="type">Principal</span>] }</h4><p><p><strong>Permissions types of an invoice.</strong><br/>    Includes fields <code>canGet : [Principal]</code> and <code>canVerify : [Principal]</code>.<br/>    Either array can be no longer than 256 principals. Callers with their principals<br/>    in the <code>canGet</code> list have permission to call <code>get_invoice()</code> for this invoice<br/>    while callers with their principals in the <code>canVerify</code> list have permission to<br/>    call either <code>verify_invoice()</code> or <code>recover_invoice_subaccount_balance()</code> for<br/>    this invoice.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.InvoiceId"><span class="keyword">type </span><span class="type">InvoiceId</span> = <span class="type">Text</span></h4><p><p><strong>ULID generated literal no longer than 26 characters.</strong></p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.Invoice_"><span class="keyword">type </span><span class="type">Invoice_</span> = { token : <a href="supported-token/SupportedToken.html#type.UnitType"><span class="type">SupportedToken.UnitType</span></a>; id : <a href="#type.InvoiceId"><span class="type">InvoiceId</span></a>; creator : <span class="type">Principal</span>; details : ?<a href="#type.Details"><span class="type">Details</span></a>; permissions : ?<a href="#type.Permissions"><span class="type">Permissions</span></a>; paymentAddress : <span class="type">Text</span>; amountDue : <span class="type">Nat</span>; amountPaid : <span class="type">Nat</span>; verifiedPaidAtTime : ?<span class="type">Time.Time</span> }</h4><p><p><strong>Invoice type used by the invoice canister used to store invoices.</strong><br/>    Has fields:<br/>      -<code>token : SupportedToken.UnitType</code><br/>      -<code>id : InvoiceId;</code><br/>      -<code>creator : Principal;</code><br/>      -<code>details : ?Details;</code><br/>      -<code>permissions : ?Permissions;</code><br/>      -<code>paymentAddress : Text;</code><br/>      -<code>amountDue : Nat;</code>  // Is always in base units (ie for ICP is the e8s value).<br/>      -<code>amountPaid : Nat;</code><br/>      -<code>verifiedPaidAtTime : ?Time.Time;</code><br/>    <strong>Note</strong> this is not the record type returned to a caller, that type<br/>    also includes all this, <code>tokenVerbose : TokenVerbose</code>, and <code>paid : Bool</code><br/>    which will be true if the invoice is successfully verified as paid as well<br/>    as <code>verifiedPaidAtTime</code> not null but the time of verification in ns.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.Invoice"><span class="keyword">type </span><span class="type">Invoice</span> = <a href="#type.Invoice_"><span class="type">Invoice_</span></a> and { paid : <span class="type">Bool</span>; tokenVerbose : <a href="supported-token/SupportedToken.html#type.TokenVerbose"><span class="type">SupportedToken.TokenVerbose</span></a> }</h4><p><p><strong>Invoice record type returned to a caller.</strong><br/>    See <code>Invoice_</code> type declaration for details.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.AddAllowedCreatorArgs"><span class="keyword">type </span><span class="type">AddAllowedCreatorArgs</span> = { who : <span class="type">Principal</span> }</h4><p><p><strong>Args of method <code>add_allowed_creator</code>.</strong><br/>    Has field <code>who : Principal</code> which is which principal to add.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.AddAllowedCreatorResult"><span class="keyword">type </span><span class="type">AddAllowedCreatorResult</span> = <span class="type">Result.Result</span>&lt;<a href="#type.AddAllowedCreatorSuccess"><span class="type">AddAllowedCreatorSuccess</span></a>, <a href="#type.AddAllowedCreatorErr"><span class="type">AddAllowedCreatorErr</span></a>&gt;</h4><p><p><strong>Result types of method <code>add_allowed_creator</code>.</strong><br/>    Is equal to <code>Result.Result&lt;AddAllowedCreatorSuccess, AddAllowedCreatorErr&gt;</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.AddAllowedCreatorSuccess"><span class="keyword">type </span><span class="type">AddAllowedCreatorSuccess</span> = { message : <span class="type">Text</span> }</h4><p><p><strong><code>ok</code> result type of method <code>add_allowed_creator</code>.</strong><br/>    Has field <code>message : Text</code> confirming principal was added.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.AddAllowedCreatorErr"><span class="keyword">type </span><span class="type">AddAllowedCreatorErr</span> = { kind : {#AlreadyAdded; #AnonymousIneligible; #MaxAllowed; #NotAuthorized} }</h4><p><p><strong><code>err</code> result type of method <code>add_allowed_creator</code>.</strong><br/>    Has field:<br/>    -<code>kind : {</code><br/>      <code>#AlreadyAdded</code><br/>      <code>#AnonymousIneligible</code><br/>      <code>#MaxAllowed</code><br/>      <code>#NotAuthorized</code><br/>    <code>}</code></p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.RemoveAllowedCreatorArgs"><span class="keyword">type </span><span class="type">RemoveAllowedCreatorArgs</span> = { who : <span class="type">Principal</span> }</h4><p><p><strong>Args of method <code>remove_allowed_creator</code>.</strong><br/>    Has field <code>who : Principal</code> which is which principal to remove.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.RemoveAllowedCreatorResult"><span class="keyword">type </span><span class="type">RemoveAllowedCreatorResult</span> = <span class="type">Result.Result</span>&lt;<a href="#type.RemoveAllowedCreatorSuccess"><span class="type">RemoveAllowedCreatorSuccess</span></a>, <a href="#type.RemoveAllowedCreatorErr"><span class="type">RemoveAllowedCreatorErr</span></a>&gt;</h4><p><p><strong>Result types of method <code>remove_allowed_creator</code>.</strong><br/>    Is equal to <code>Result.Result&lt;RemoveAllowedCreatorSuccess, RemoveAllowedCreatorErr&gt;</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.RemoveAllowedCreatorSuccess"><span class="keyword">type </span><span class="type">RemoveAllowedCreatorSuccess</span> = { message : <span class="type">Text</span> }</h4><p><p><strong><code>ok</code> result type of method <code>remove_allowed_creator</code>.</strong><br/>    Has field <code>message : Text</code> confirming principal was removed.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.RemoveAllowedCreatorErr"><span class="keyword">type </span><span class="type">RemoveAllowedCreatorErr</span> = { kind : {#NotAuthorized; #NotFound} }</h4><p><p><strong><code>err</code> result type of method <code>remove_allowed_creator</code>.</strong><br/>    Has field:<br/>    -<code>kind : {</code><br/>      <code>#NotAuthorized</code><br/>      <code>#NotFound</code><br/>    <code>}</code></p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetAllowedCreatorsListResult"><span class="keyword">type </span><span class="type">GetAllowedCreatorsListResult</span> = <span class="type">Result.Result</span>&lt;<a href="#type.GetAllowedCreatorsListSuccess"><span class="type">GetAllowedCreatorsListSuccess</span></a>, <a href="#type.GetAllowedCreatorsListErr"><span class="type">GetAllowedCreatorsListErr</span></a>&gt;</h4><p><p><strong>Result types of method <code>get_allowed_creators_list</code>.</strong><br/>    Is equal to <code>Result.Result&lt;GetAllowedCreatorsListSuccess, GetAllowedCreatorsListErr&gt;</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetAllowedCreatorsListSuccess"><span class="keyword">type </span><span class="type">GetAllowedCreatorsListSuccess</span> = { allowed : [<span class="type">Principal</span>] }</h4><p><p><strong><code>ok</code> result type of method <code>get_allowed_creators_list</code>.</strong><br/>    Has field <code>allowed : [Principal]</code> is the list of principals allowed to create invoices.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetAllowedCreatorsListErr"><span class="keyword">type </span><span class="type">GetAllowedCreatorsListErr</span> = { kind : {#NotAuthorized} }</h4><p><p><strong><code>err</code> result type of method <code>get_allowed_creators_list</code>.</strong><br/>    Has field:<br/>    -<code>kind : {</code></p>
<pre><code>  `#NotAuthorized`  
`}`</code></pre></p></div><div class="declaration"><h4 class="type-declaration" id="type.CreateInvoiceArgs"><span class="keyword">type </span><span class="type">CreateInvoiceArgs</span> = { tokenAmount : <a href="supported-token/SupportedToken.html#type.Amount"><span class="type">SupportedToken.Amount</span></a>; details : ?<a href="#type.Details"><span class="type">Details</span></a>; permissions : ?<a href="#type.Permissions"><span class="type">Permissions</span></a> }</h4><p><p><strong>Args of method <code>create_invoice</code>.</strong><br/>    Has fields:<br/>      -<code>tokenAmount : SupportedToken.Amount</code><br/>      -<code>permissions : ?Permissions</code><br/>      -<code>details : ?Details</code><br/>    <code>tokenAmount</code> will differ for each token type by variant tag name, and also by token amount type.<br/>    Ie for ICP transactions this would look like:<br/>      <code>{ ICP = { e8s = &lt;amount of e8s&gt; } }</code> (or <code>ICP_nns</code>)<br/>    while for ICRC1 transactions:<br/>      <code>{ &lt;ICRC1VariantTagTokenName&gt; = &lt;amount of tokens&gt; }</code><br/>    for instance <code>{ ICRC1_ExampleToken = 1_000_000_000_000 }</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.CreateInvoiceResult"><span class="keyword">type </span><span class="type">CreateInvoiceResult</span> = <span class="type">Result.Result</span>&lt;<a href="#type.CreateInvoiceSuccess"><span class="type">CreateInvoiceSuccess</span></a>, <a href="#type.CreateInvoiceErr"><span class="type">CreateInvoiceErr</span></a>&gt;</h4><p><p><strong>Result types of method <code>create_invoice</code>.</strong><br/>    Is equal to <code>Result.Result&lt;CreateInvoiceSuccess, CreateInvoiceErr&gt;</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.CreateInvoiceSuccess"><span class="keyword">type </span><span class="type">CreateInvoiceSuccess</span> = { invoice : <a href="#type.Invoice"><span class="type">Invoice</span></a> }</h4><p><p><strong><code>ok</code> result type of method <code>create_invoice</code>.</strong><br/>    Has field <code>invoice : Invoice</code> is the returned invoice which has all the fields<br/>    <code>Invoice_</code> type  has as well as <code>paid : Bool</code> and  <code>tokenVerbose : TokenVerbose</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.CreateInvoiceErr"><span class="keyword">type </span><span class="type">CreateInvoiceErr</span> = { kind : {#DescriptionTooLarge; #InsufficientAmountDue; #MaxInvoicesCreated; #MetaTooLarge; #NotAuthorized; #TooManyPermissions} }</h4><p><p><strong><code>err</code> result type of method <code>create_invoice</code>.</strong><br/>    Has field:<br/>    -<code>kind : {</code><br/>      <code>#DescriptionTooLarge</code><br/>      <code>#InsufficientAmountDue</code><br/>      <code>#MaxInvoicesCreated</code><br/>      <code>#MetaTooLarge</code><br/>      <code>#NotAuthorized</code><br/>      <code>#TooManyPermissions</code><br/>    <code>}</code></p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetInvoiceArgs"><span class="keyword">type </span><span class="type">GetInvoiceArgs</span> = { id : <a href="#type.InvoiceId"><span class="type">InvoiceId</span></a> }</h4><p><p><strong>Args of method <code>get_invoice</code>.</strong><br/>    Has field <code>id : InvoiceId</code> which is which invoice with this id to get.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetInvoiceResult"><span class="keyword">type </span><span class="type">GetInvoiceResult</span> = <span class="type">Result.Result</span>&lt;<a href="#type.GetInvoiceSuccess"><span class="type">GetInvoiceSuccess</span></a>, <a href="#type.GetInvoiceErr"><span class="type">GetInvoiceErr</span></a>&gt;</h4><p><p><strong>Result types of method <code>get_invoice</code>.</strong><br/>    Is equal to <code>Result.Result&lt;GetInvoiceSuccess, GetInvoiceErr&gt;</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetInvoiceSuccess"><span class="keyword">type </span><span class="type">GetInvoiceSuccess</span> = { invoice : <a href="#type.Invoice"><span class="type">Invoice</span></a> }</h4><p><p><strong><code>ok</code> result type of method <code>get_invoice</code>.</strong><br/>    Has field <code>invoice : Invoice</code> is the returned invoice which has all the fields<br/>    <code>Invoice_</code> type  has as well as <code>paid : Bool</code> and  <code>tokenVerbose : TokenVerbose</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetInvoiceErr"><span class="keyword">type </span><span class="type">GetInvoiceErr</span> = { kind : {#NotFound; #NotAuthorized} }</h4><p><p><strong><code>err</code> result type of method <code>get_invoice</code>.</strong><br/>    Has field:<br/>    -<code>kind : {</code><br/>      <code>#NotFound</code><br/>      <code>#NotAuthorized</code><br/>    <code>}</code></p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetCallerBalanceArgs"><span class="keyword">type </span><span class="type">GetCallerBalanceArgs</span> = { token : <a href="supported-token/SupportedToken.html#type.UnitType"><span class="type">SupportedToken.UnitType</span></a> }</h4><p><p><strong>Args of method <code>get_caller_balance</code>.</strong><br/>    Has field <code>token : SupportedToken.UnitType</code> which is which supported token type address<br/>    to get. For instance: <code>{ token = #ICP };</code> or <code>{ token = #ICRC1_ExampleToken };</code></p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetCallerBalanceResult"><span class="keyword">type </span><span class="type">GetCallerBalanceResult</span> = <span class="type">Result.Result</span>&lt;<a href="#type.GetCallerBalanceSuccess"><span class="type">GetCallerBalanceSuccess</span></a>, <a href="#type.GetCallerBalanceErr"><span class="type">GetCallerBalanceErr</span></a>&gt;</h4><p><p><strong>Result types of method <code>get_caller_balance</code>.</strong><br/>    Is equal to <code>Result.Result&lt;GetCallerBalanceSuccess, GetCallerBalanceErr&gt;</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetCallerBalanceSuccess"><span class="keyword">type </span><span class="type">GetCallerBalanceSuccess</span> = { balance : <a href="supported-token/SupportedToken.html#type.Amount"><span class="type">SupportedToken.Amount</span></a> }</h4><p><p><strong><code>ok</code> result type of method <code>get_caller_balance</code>.</strong><br/>    Has field <code>balance : SupportedToken.Amount</code> is the token balance.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetCallerBalanceErr"><span class="keyword">type </span><span class="type">GetCallerBalanceErr</span> = { kind : {#NotAuthorized; #CaughtException : <span class="type">Text</span>} }</h4><p><p><strong><code>err</code> result type of method <code>get_caller_balance</code>.</strong><br/>    Has field:<br/>    -<code>kind : {</code><br/>      <code>#NotAuthorized;</code><br/>      <code>#CaughtException : Text;</code><br/>    <code>}</code></p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetCallerAddressArgs"><span class="keyword">type </span><span class="type">GetCallerAddressArgs</span> = { token : <a href="supported-token/SupportedToken.html#type.UnitType"><span class="type">SupportedToken.UnitType</span></a> }</h4><p><p><strong>Args of method <code>get_caller_address</code>.</strong><br/>    Has field <code>token : SupportedToken.UnitType</code> which is which supported token type balance<br/>    to get. For instance: <code>{ token = #ICP };</code> or <code>{ token = #ICRC1_ExampleToken };</code></p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetCallerAddressResult"><span class="keyword">type </span><span class="type">GetCallerAddressResult</span> = <span class="type">Result.Result</span>&lt;<a href="#type.GetCallerAddressSuccess"><span class="type">GetCallerAddressSuccess</span></a>, <a href="#type.GetCallerAddressErr"><span class="type">GetCallerAddressErr</span></a>&gt;</h4><p><p><strong>Result types of method <code>get_caller_address</code>.</strong><br/>    Is equal to <code>Result.Result&lt;GetCallerAddressSuccess, GetCallerAddressErr&gt;</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetCallerAddressSuccess"><span class="keyword">type </span><span class="type">GetCallerAddressSuccess</span> = { asAddress : <a href="supported-token/SupportedToken.html#type.Address"><span class="type">SupportedToken.Address</span></a>; asText : <span class="type">Text</span> }</h4><p><p><strong><code>ok</code> result type of method <code>get_caller_address</code>.</strong><br/>    Has fields:<br/>    -<code>asAddress : SupportedToken.Address;</code><br/>    -<code>asText : Text;</code><br/>    which is both the token's specific address type and its text equivalent.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.GetCallerAddressErr"><span class="keyword">type </span><span class="type">GetCallerAddressErr</span> = { kind : {#NotAuthorized} }</h4><p><p><strong><code>err</code> result type of method <code>get_caller_address</code>.</strong><br/>    Has field:<br/>    -<code>kind : {</code><br/>      <code>#NotAuthorized;</code><br/>    <code>}</code></p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.VerifyInvoiceArgs"><span class="keyword">type </span><span class="type">VerifyInvoiceArgs</span> = { id : <a href="#type.InvoiceId"><span class="type">InvoiceId</span></a> }</h4><p><p><strong>Args of method <code>verify_invoice</code>.</strong><br/>    Has field <code>id : InvoiceId</code> which is which invoice with this id to verify.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.VerifyInvoiceResult"><span class="keyword">type </span><span class="type">VerifyInvoiceResult</span> = <span class="type">Result.Result</span>&lt;<a href="#type.VerifyInvoiceSuccess"><span class="type">VerifyInvoiceSuccess</span></a>, <a href="#type.VerifyInvoiceErr"><span class="type">VerifyInvoiceErr</span></a>&gt;</h4><p><p><strong>Result types of method <code>verify_invoice</code>.</strong><br/>    Is equal to <code>Result.Result&lt;VerifyInvoiceSuccess, VerifyInvoiceErr&gt;</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.VerifyInvoiceSuccess"><span class="keyword">type </span><span class="type">VerifyInvoiceSuccess</span> = {#VerifiedPaid : { invoice : <a href="#type.Invoice"><span class="type">Invoice</span></a> }; #VerifiedAlready : { invoice : <a href="#type.Invoice"><span class="type">Invoice</span></a> }}</h4><p><p><strong><code>ok</code> result type of method <code>verify_invoice</code>.</strong><br/>    Is a variant:<br/>    <code>{</code><br/>    <code>#VerifiedPaid : { invoice : Invoice };</code><br/>    <code>#VerifiedAlready : { invoice : Invoice };</code><br/>    <code>}</code><br/>    which includes the invoice updated as verified so that <code>paid : Bool</code> will<br/>    return true (as well <code>verifiedPaidAtTime</code> no longer being null).</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.VerifyInvoiceErr"><span class="keyword">type </span><span class="type">VerifyInvoiceErr</span> = { kind : {#InProgress; #IncompletePayment : { partialAmountPaid : <a href="supported-token/SupportedToken.html#type.Amount"><span class="type">SupportedToken.Amount</span></a> }; #NotAuthorized; #NotFound; #Unpaid; #SupportedTokenTransferErr : <a href="supported-token/SupportedToken.html#type.TransferErr"><span class="type">SupportedToken.TransferErr</span></a>; #CaughtException : <span class="type">Text</span>} }</h4><p><p><strong><code>err</code> result type of method <code>verify_invoice</code>.</strong><br/>    Has field:<br/>    -<code>kind : {</code><br/>      <code>#InProgress;</code><br/>      <code>#IncompletePayment : { partialAmountPaid : SupportedToken.Amount };</code><br/>      <code>#NotAuthorized;</code><br/>      <code>#NotFound;</code><br/>      <code>#Unpaid : { partialAmountPaid : SupportedToken.Amount };</code><br/>      <code>#SupportedTokenTransferErr : SupportedToken.TransferErr;</code><br/>      <code>#CaughtException : Text;</code><br/>    <code>}</code></p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.TransferArgs"><span class="keyword">type </span><span class="type">TransferArgs</span> = { tokenAmount : <a href="supported-token/SupportedToken.html#type.Amount"><span class="type">SupportedToken.Amount</span></a>; destination : <a href="supported-token/SupportedToken.html#type.RecipientAddress"><span class="type">SupportedToken.RecipientAddress</span></a> }</h4><p><p><strong>Args of method <code>transfer</code>.</strong><br/>    Has fields:<br/>     -<code>tokenAmount : SupportedToken.Amount</code><br/>     -<code>destination : SupportedToken.RecipientAddress</code><br/>    An example looks like:<br/>    <code>{</code><br/>    <code>tokenAmount = #ICP({ e8s = 1_000_000_000_000 }) };</code><br/>    <code>destination = #HumanReadable(&quot;904a62f479c999d141c3c3d98d1066dfbc1864ec92dce98ed9f33d0f951479d1&quot;);</code><br/>    <code>}</code><br/>    or<br/>    <code>{</code><br/>    <code>tokenAmount = #ICRC1_ExampleToken(1_000_000_000_000) };</code><br/>    <code>destination = #CanisterExpected(#ICRC1_ExampleToken({</code><br/>    <code>owner = Principal.fromText(&quot;q4eej-kyaaa-aaaaa-aaaha-cai&quot;);</code><br/>    <code>subaccount = null;</code><br/>    <code>}))</code><br/>    <code>}</code><br/>    Note if <code>CanisterExpected</code> <code>RecipientAddress</code> is passed it must match the<br/>    token type <code>tokenAmount</code> is or err kind #InvalidDestination is returned.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.TransferResult"><span class="keyword">type </span><span class="type">TransferResult</span> = <span class="type">Result.Result</span>&lt;<a href="supported-token/SupportedToken.html#type.TransferSuccess"><span class="type">SupportedToken.TransferSuccess</span></a>, <a href="#type.TransferError"><span class="type">TransferError</span></a>&gt;</h4><p><p><strong>Result types of method <code>transfer</code>.</strong><br/>    Is equal to <code>Result.Result&lt;SupportedToken.TransferSuccess, TransferError&gt;</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.TransferError"><span class="keyword">type </span><span class="type">TransferError</span> = { kind : {#NotAuthorized; #InsufficientTransferAmount; #InvalidDestination; #SupportedTokenTransferErr : <a href="supported-token/SupportedToken.html#type.TransferErr"><span class="type">SupportedToken.TransferErr</span></a>; #CaughtException : <span class="type">Text</span>} }</h4><p><p><strong><code>err</code> result type of method <code>transfer</code>.</strong><br/>    Has field:<br/>    -<code>kind : {</code><br/>      <code>#NotAuthorized;</code><br/>      <code>#InsufficientTransferAmount;</code><br/>      <code>#InvalidDestination;</code><br/>      <code>#SupportedTokenTransferErr : SupportedToken.TransferErr;</code><br/>      <code>#CaughtException : Text;</code><br/>    <code>}</code></p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.RecoverInvoiceSubaccountBalanceArgs"><span class="keyword">type </span><span class="type">RecoverInvoiceSubaccountBalanceArgs</span> = { id : <a href="#type.InvoiceId"><span class="type">InvoiceId</span></a>; destination : <a href="supported-token/SupportedToken.html#type.RecipientAddress"><span class="type">SupportedToken.RecipientAddress</span></a> }</h4><p><p><strong>Args of method <code>recover_invoice_subaccount_balance</code>.</strong><br/>    Has fields:<br/>     -<code>id : InvoiceId</code><br/>     -<code>destination : SupportedToken.RecipientAddress</code><br/>    An example looks like:<br/>    <code>{</code><br/>    <code>id = &quot;6GNGGRXAKGTXG070DV4GW2JKCJ&quot;;</code><br/>    <code>destination = #HumanReadable(&quot;904a62f479c999d141c3c3d98d1066dfbc1864ec92dce98ed9f33d0f951479d1&quot;);</code><br/>    <code>}</code><br/>    or<br/>    <code>{</code><br/>    <code>id = &quot;6GNGGRXAKGTXG070DV4GW2JKCJ&quot;;</code><br/>    <code>destination = #CanisterExpected(#ICRC1_ExampleToken({</code><br/>    <code>owner = Principal.fromText(&quot;q4eej-kyaaa-aaaaa-aaaha-cai&quot;);</code><br/>    <code>subaccount = null;</code><br/>    <code>}))</code><br/>    <code>}</code><br/>    Note if <code>CanisterExpected</code> <code>RecipientAddress</code> is passed it must match the<br/>    token type of the invoice or err kind #InvalidDestination is returned.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.RecoverInvoiceSubaccountBalanceResult"><span class="keyword">type </span><span class="type">RecoverInvoiceSubaccountBalanceResult</span> = <span class="type">Result.Result</span>&lt;<a href="#type.RecoverInvoiceSubacccountBalanceSuccess"><span class="type">RecoverInvoiceSubacccountBalanceSuccess</span></a>, <a href="#type.RecoverInvoiceSubacccountBalanceErr"><span class="type">RecoverInvoiceSubacccountBalanceErr</span></a>&gt;</h4><p><p><strong>Result types of method <code>recover_invoice_subaccount_balance</code>.</strong><br/>    Is equal to <code>Result.Result&lt;RecoverInvoiceSubacccountBalanceSuccess, RecoverInvoiceSubacccountBalanceErr&gt;</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.RecoverInvoiceSubacccountBalanceSuccess"><span class="keyword">type </span><span class="type">RecoverInvoiceSubacccountBalanceSuccess</span> = { transferSuccess : <a href="supported-token/SupportedToken.html#type.TransferSuccess"><span class="type">SupportedToken.TransferSuccess</span></a>; balanceRecovered : <a href="supported-token/SupportedToken.html#type.Amount"><span class="type">SupportedToken.Amount</span></a> }</h4><p><p><strong><code>ok</code> result type of method <code>recover_invoice_subaccount_balance</code>.</strong><br/>    Has fields:<br/>    -<code>transferSuccess : SupportedToken.TransferSuccess;</code><br/>    -<code>balanceRecovered : SupportedToken.Amount</code><br/>    which is both the token's specific address type and its text equivalent.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.RecoverInvoiceSubacccountBalanceErr"><span class="keyword">type </span><span class="type">RecoverInvoiceSubacccountBalanceErr</span> = { kind : {#InProgress; #InsufficientTransferAmount; #InvalidDestination; #NotAuthorized; #NoBalance; #NotFound; #SupportedTokenTransferErr : <a href="supported-token/SupportedToken.html#type.TransferErr"><span class="type">SupportedToken.TransferErr</span></a>; #CaughtException : <span class="type">Text</span>} }</h4><p><p><strong><code>err</code> result type of method <code>recover_invoice_subaccount_balance</code>.</strong><br/>    Has field:<br/>    -<code>kind : {</code><br/>      <code>#InProgress;</code><br/>      <code>#InsufficientTransferAmount;</code><br/>      <code>#InvalidDestination;</code><br/>      <code>#NotAuthorized;</code><br/>      <code>#NoBalance;</code><br/>      <code>#NotFound;</code><br/>      <code>#SupportedTokenTransferErr : SupportedToken.TransferErr;</code><br/>      <code>#CaughtException : Text;</code><br/>    <code>}</code></p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.ToOtherAddressFormatArgs"><span class="keyword">type </span><span class="type">ToOtherAddressFormatArgs</span> = { token : ?<a href="supported-token/SupportedToken.html#type.UnitType"><span class="type">SupportedToken.UnitType</span></a>; address : ?<a href="supported-token/SupportedToken.html#type.RecipientAddress"><span class="type">SupportedToken.RecipientAddress</span></a> }</h4><p><p><strong>Args of method <code>to_other_address_format</code>.</strong><br/>    Has fields:<br/>     -<code>address : ?SupportedToken.RecipientAddress</code><br/>     -<code>token : ?SupportedToken.UnitType</code><br/>    An example looks like:<br/>    <code>{</code><br/>    <code>token = #ICP_nns;</code><br/>    <code>destination = #HumanReadable(&quot;904a62f479c999d141c3c3d98d1066dfbc1864ec92dce98ed9f33d0f951479d1&quot;);</code><br/>    <code>}</code><br/>    or<br/>    <code>{</code><br/>    <code>token = null;</code><br/>    <code>destination = #CanisterExpected(#ICRC1_ExampleToken({</code><br/>    <code>owner = Principal.fromText(&quot;q4eej-kyaaa-aaaaa-aaaha-cai&quot;);</code><br/>    <code>subaccount = null;</code><br/>    <code>}))</code><br/>    <code>}</code><br/>    Or just a <code>tokenType</code> can be passed into to get the default subaccount<br/>    icp accountIdentifier blob or icrc1 account of the caller's principal.<br/>    Note this method will return both an address type and its text equivalent.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.ToOtherAddressFormatResult"><span class="keyword">type </span><span class="type">ToOtherAddressFormatResult</span> = <span class="type">Result.Result</span>&lt;<a href="#type.ToOtherAddressFormatSuccess"><span class="type">ToOtherAddressFormatSuccess</span></a>, <a href="#type.ToOtherAddressFormatErr"><span class="type">ToOtherAddressFormatErr</span></a>&gt;</h4><p><p><strong>Result types of method <code>to_other_address_format</code>.</strong><br/>    Is equal to <code>Result.Result&lt;ToOtherAddressFormatSuccess, ToOtherAddressFormatErr&gt;</code>.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.ToOtherAddressFormatSuccess"><span class="keyword">type </span><span class="type">ToOtherAddressFormatSuccess</span> = { asAddress : <a href="supported-token/SupportedToken.html#type.Address"><span class="type">SupportedToken.Address</span></a>; asText : <span class="type">Text</span> }</h4><p><p><strong><code>ok</code> result type of method <code>to_other_address_format</code>.</strong><br/>    Has fields:<br/>    -<code>asAddress : SupportedToken.Address;</code><br/>    -<code>asText : Text;</code><br/>    which is both the token's specific address type and its text equivalent.</p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.ToOtherAddressFormatErr"><span class="keyword">type </span><span class="type">ToOtherAddressFormatErr</span> = { kind : {#NotAuthorized; #MissingTokenType; #InvalidDestination} }</h4><p><p><strong><code>err</code> result type of method <code>to_other_address_format</code>.</strong><br/>    Has field:<br/>    -<code>kind : {</code><br/>      <code>#NotAuthorized;</code><br/>      <code>#MissingTokenType;</code><br/>      <code>#InvalidDestination;</code><br/>    <code>}</code></p>
</p></div><div class="declaration"><h4 class="type-declaration" id="type.InvoiceCanisterAPI"><span class="keyword">type </span><span class="type">InvoiceCanisterAPI</span> = { add_allowed_creator : <span class="keyword">shared </span><a href="#type.AddAllowedCreatorArgs"><span class="type">AddAllowedCreatorArgs</span></a> -&gt; <span class="keyword">async </span><a href="#type.AddAllowedCreatorResult"><span class="type">AddAllowedCreatorResult</span></a>; remove_allowed_creator : <span class="keyword">shared </span><a href="#type.RemoveAllowedCreatorArgs"><span class="type">RemoveAllowedCreatorArgs</span></a> -&gt; <span class="keyword">async </span><a href="#type.RemoveAllowedCreatorResult"><span class="type">RemoveAllowedCreatorResult</span></a>; get_allowed_creators_list : <span class="keyword">shared </span>() -&gt; <span class="keyword">async </span><a href="#type.GetAllowedCreatorsListResult"><span class="type">GetAllowedCreatorsListResult</span></a>; create_invoice : <span class="keyword">shared </span><a href="#type.CreateInvoiceArgs"><span class="type">CreateInvoiceArgs</span></a> -&gt; <span class="keyword">async </span><a href="#type.CreateInvoiceResult"><span class="type">CreateInvoiceResult</span></a>; get_caller_balance : <span class="keyword">shared </span><a href="#type.GetCallerBalanceArgs"><span class="type">GetCallerBalanceArgs</span></a> -&gt; <span class="keyword">async </span><a href="#type.GetCallerBalanceResult"><span class="type">GetCallerBalanceResult</span></a>; get_caller_address : <span class="keyword">shared </span><a href="#type.GetCallerAddressArgs"><span class="type">GetCallerAddressArgs</span></a> -&gt; <span class="keyword">async </span><a href="#type.GetCallerAddressResult"><span class="type">GetCallerAddressResult</span></a>; transfer : <span class="keyword">shared </span><a href="#type.TransferArgs"><span class="type">TransferArgs</span></a> -&gt; <span class="keyword">async </span><a href="#type.TransferResult"><span class="type">TransferResult</span></a>; to_other_address_format : <span class="keyword">shared </span><a href="#type.ToOtherAddressFormatArgs"><span class="type">ToOtherAddressFormatArgs</span></a> -&gt; <span class="keyword">async </span><a href="#type.ToOtherAddressFormatResult"><span class="type">ToOtherAddressFormatResult</span></a>; get_invoice : <span class="keyword">shared </span><a href="#type.GetInvoiceArgs"><span class="type">GetInvoiceArgs</span></a> -&gt; <span class="keyword">async </span><a href="#type.GetInvoiceResult"><span class="type">GetInvoiceResult</span></a>; verify_invoice : <span class="keyword">shared </span><a href="#type.VerifyInvoiceArgs"><span class="type">VerifyInvoiceArgs</span></a> -&gt; <span class="keyword">async </span><a href="#type.VerifyInvoiceArgs"><span class="type">VerifyInvoiceArgs</span></a>; recover_invoice_subaccount_balance : <span class="keyword">shared </span><a href="#type.RecoverInvoiceSubaccountBalanceArgs"><span class="type">RecoverInvoiceSubaccountBalanceArgs</span></a> -&gt; <span class="keyword">async </span><a href="#type.RecoverInvoiceSubaccountBalanceResult"><span class="type">RecoverInvoiceSubaccountBalanceResult</span></a> }</h4><p><p><strong>Interface for instantiating an invoice canister<pre><code>actor in another canister using the Invoice Canister API.</code></pre></strong><br/>    When using the invoice canister in another canister an actor declaration of<br/>    the invoice canister's actor type will be needed, which is this type declaration.<br/>    <em>Remember to add that canister as an allowed creator so it is authorized to make calls.</em><br/>    An example of using of this:</p>
<p>    <code>
    import Types &quot;./modules/Types.mo&quot;
    // Other imports.

    actor CanisterRequiringPaymentProcessing {

      // Other state, type and method declarations.

      let invoiceCanister : Types.InvoiceCanisterAPI = fromActor(&quot;&lt;invoice canister id&gt;&quot;);

      // Now the API methods can be called such as
      // await invoiceCanister.create_invoice(&lt;CreateInvoiceArgs&gt;);

      // rest of canister's code...
    };
</code></p>
</p></div></div></body></html>